apiVersion: v1
kind: Namespace
metadata:
  name: siteconfig.Metadata.Name
  labels:
    name: siteconfig.Metadata.Name
---
apiVersion: hive.openshift.io/v1
kind: ClusterImageSet
metadata:
  name: siteconfig.Spec.ClusterImageNameRef.Name
spec:
  releaseImage: siteconfig.Spec.ClusterImageNameRef.ReleaseImageUrl
---
apiVersion: extensions.hive.openshift.io/v1beta1
kind: AgentClusterInstall
metadata:
  name: siteconfig.Spec.Clusters.ClusterName
  namespace: siteconfig.Metadata.Name
spec:
  clusterDeploymentRef:
    name: siteconfig.Spec.Clusters.ClusterName
  imageSetRef:
    name: siteconfig.Spec.ClusterImageNameRef.Name
  apiVIP: siteconfig.Spec.Clusters.ApiVIP
  ingressVIP: siteconfig.Spec.Clusters.IngressVIP
  networking:
    clusterNetwork: siteconfig.Spec.Clusters.ClusterNetwork
    machineNetwork: siteconfig.Spec.Clusters.MachineNetwork
    serviceNetwork: siteconfig.Spec.Clusters.ServiceNetwork
  provisionRequirements:
    controlPlaneAgents: 1
  sshPublicKey: siteconfig.Spec.SshPublicKey
  manifestsConfigMapRef:
    name: siteconfig.Spec.Clusters.ClusterName
---
apiVersion: hive.openshift.io/v1
kind: ClusterDeployment
metadata:
  name: siteconfig.Spec.Clusters.ClusterName
  namespace: siteconfig.Metadata.Name
spec:
  baseDomain: siteconfig.Spec.BaseDomain
  clusterInstallRef:
    group: extensions.hive.openshift.io
    kind: AgentClusterInstall
    name: siteconfig.Spec.Clusters.ClusterName
    version: v1beta1
  clusterName: siteconfig.Spec.Clusters.ClusterName
  installed: false
  platform:
    agentBareMetal:
      agentSelector:
        matchLabels:
          cluster-name: siteconfig.Spec.Clusters.ClusterName
  pullSecretRef:
    name: siteconfig.Spec.PullSecretRef
  provisioning:
    sshPrivateKeySecretRef:
      name: siteconfig.Spec.SshPrivateKeySecretRef.Name
---
apiVersion: agent-install.openshift.io/v1beta1
kind: NMStateConfig
metadata:
  name: siteconfig.Spec.Clusters.ClusterName
  namespace: siteconfig.Metadata.Name
  labels:
    nmstate-label: siteconfig.Spec.Clusters.ClusterName
spec:
  config: siteconfig.Spec.Clusters.Nodes.NodeNetwork.Config
  interfaces: siteconfig.Spec.Clusters.Nodes.NodeNetwork.Interfaces
---
apiVersion: agent.open-cluster-management.io/v1
kind: KlusterletAddonConfig
metadata:
  name: siteconfig.Spec.Clusters.ClusterName
  namespace: siteconfig.Metadata.Name
spec:
  clusterName: siteconfig.Spec.Clusters.ClusterName
  clusterNamespace: siteconfig.Metadata.Name
  clusterLabels:
    cloud: auto-detect
    vendor: auto-detect
  applicationManager:
    enabled: true
  certPolicyController:
    enabled: true
  iamPolicyController:
    enabled: true
  policyController:
    enabled: true
  searchCollector:
    enabled: true
---
apiVersion: cluster.open-cluster-management.io/v1
kind: ManagedCluster
metadata:
  name: siteconfig.Spec.Clusters.ClusterName
  labels: siteconfig.Spec.Clusters.ClusterLabels
spec:
  hubAcceptsClient: true
---
apiVersion: agent-install.openshift.io/v1beta1
kind: InfraEnv
metadata:
  name: siteconfig.Spec.Clusters.ClusterName
  namespace: siteconfig.Metadata.Name
spec:
  clusterRef:
    name: siteconfig.Spec.Clusters.ClusterName
    namespace: siteconfig.Metadata.Name
  sshAuthorizedKey: siteconfig.Spec.SshPublicKey
  agentLabelSelector:
    matchLabels:
      cluster-name: siteconfig.Spec.Clusters.ClusterName
  pullSecretRef:
    name: siteconfig.Spec.PullSecretRef
  ignitionConfigOverride: siteconfig.Spec.Clusters.IgnitionConfigOverride
  nmStateConfigLabelSelector:
    matchLabels:
      nmstate-label: siteconfig.Spec.Clusters.ClusterName
  additionalNTPSources: siteconfig.Spec.Clusters.AdditionalNTPSources
---
apiVersion: metal3.io/v1alpha1
kind: BareMetalHost
metadata:
  name: siteconfig.Spec.Clusters.ClusterName
  namespace: siteconfig.Metadata.Name
  annotations:
    inspect.metal3.io: disabled
    bmac.agent-install.openshift.io/hostname: siteconfig.Spec.Clusters.Nodes.HostName
  labels:
    infraenvs.agent-install.openshift.io: siteconfig.Spec.Clusters.ClusterName
spec:
  bootMode: siteconfig.Spec.Clusters.Nodes.BootMode
  bmc:
    address: siteconfig.Spec.Clusters.Nodes.BmcAddress
    disableCertificateVerification: true
    credentialsName: siteconfig.Spec.Clusters.Nodes.BmcCredentialsName.Name
  bootMACAddress: siteconfig.Spec.Clusters.Nodes.BootMACAddress
  automatedCleaningMode: disabled
  online: true
  rootDeviceHints: siteconfig.Spec.Clusters.Nodes.RootDeviceHints
  userData: siteconfig.Spec.Clusters.Nodes.UserData
