---
apiVersion: v1
kind: Namespace
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "0"
    labels:
        name: cluster1
    name: cluster1
---
apiVersion: extensions.hive.openshift.io/v1beta1
kind: AgentClusterInstall
metadata:
    annotations:
        agent-install.openshift.io/install-config-overrides: '{"networking":{"networkType":"OVNKubernetes"}}'
        argocd.argoproj.io/sync-wave: "1"
    name: cluster1
    namespace: cluster1
spec:
    clusterDeploymentRef:
        name: cluster1
    imageSetRef:
        name: openshift-v4.8.0
    manifestsConfigMapRef:
        name: cluster1
    networking: {}
    provisionRequirements:
        controlPlaneAgents: 1
---
apiVersion: hive.openshift.io/v1
kind: ClusterDeployment
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "1"
    name: cluster1
    namespace: cluster1
spec:
    clusterInstallRef:
        group: extensions.hive.openshift.io
        kind: AgentClusterInstall
        name: cluster1
        version: v1beta1
    clusterName: cluster1
    platform:
        agentBareMetal:
            agentSelector:
                matchLabels:
                    cluster-name: cluster1
    pullSecretRef: {}
---
apiVersion: agent-install.openshift.io/v1beta1
kind: InfraEnv
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "1"
    name: cluster1
    namespace: cluster1
spec:
    clusterRef:
        name: cluster1
        namespace: cluster1
    nmStateConfigLabelSelector:
        matchLabels:
            nmstate-label: cluster1
    pullSecretRef: {}
---
apiVersion: metal3.io/v1alpha1
kind: BareMetalHost
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "1"
        bmac.agent-install.openshift.io/hostname: node1
        bmac.agent-install.openshift.io/role: master
        inspect.metal3.io: disabled
    labels:
        infraenvs.agent-install.openshift.io: cluster1
    name: node1
    namespace: cluster1
spec:
    automatedCleaningMode: disabled
    bmc:
        disableCertificateVerification: true
    bootMode: UEFI
    online: true
---
apiVersion: v1
data:
    03-sctp-machine-config-master.yaml: |
        # Automatically generated by extra-manifests-builder
        # Do not make changes directly.
        apiVersion: machineconfiguration.openshift.io/v1
        kind: MachineConfig
        metadata:
          labels:
            machineconfiguration.openshift.io/role: master
          name: load-sctp-module-master
        spec:
          config:
            ignition:
              version: 2.2.0
            storage:
              files:
                - contents:
                    source: data:,
                    verification: {}
                  filesystem: root
                  mode: 420
                  path: /etc/modprobe.d/sctp-blacklist.conf
                - contents:
                    source: data:text/plain;charset=utf-8,sctp
                  filesystem: root
                  mode: 420
                  path: /etc/modules-load.d/sctp-load.conf
    03-sctp-machine-config-worker.yaml: |
        # Automatically generated by extra-manifests-builder
        # Do not make changes directly.
        apiVersion: machineconfiguration.openshift.io/v1
        kind: MachineConfig
        metadata:
          labels:
            machineconfiguration.openshift.io/role: worker
          name: load-sctp-module-worker
        spec:
          config:
            ignition:
              version: 2.2.0
            storage:
              files:
                - contents:
                    source: data:,
                    verification: {}
                  filesystem: root
                  mode: 420
                  path: /etc/modprobe.d/sctp-blacklist.conf
                - contents:
                    source: data:text/plain;charset=utf-8,sctp
                  filesystem: root
                  mode: 420
                  path: /etc/modules-load.d/sctp-load.conf
    06-kdump-master.yaml: |
        # Automatically generated by extra-manifests-builder
        # Do not make changes directly.
        apiVersion: machineconfiguration.openshift.io/v1
        kind: MachineConfig
        metadata:
          labels:
            machineconfiguration.openshift.io/role: master
          name: 06-kdump-enable-master
        spec:
          config:
            ignition:
              version: 3.2.0
            systemd:
              units:
              - enabled: true
                name: kdump.service
          kernelArguments:
            - crashkernel=512M
    06-kdump-worker.yaml: |
        # Automatically generated by extra-manifests-builder
        # Do not make changes directly.
        apiVersion: machineconfiguration.openshift.io/v1
        kind: MachineConfig
        metadata:
          labels:
            machineconfiguration.openshift.io/role: worker
          name: 06-kdump-enable-worker
        spec:
          config:
            ignition:
              version: 3.2.0
            systemd:
              units:
              - enabled: true
                name: kdump.service
          kernelArguments:
            - crashkernel=512M
    master-image-registry-partition-mc.yaml: |
        # Automatically generated by extra-manifests-builder
        # Do not make changes directly.
        apiVersion: machineconfiguration.openshift.io/v1
        kind: MachineConfig
        metadata:
          name: 98-var-imageregistry-partition-master
          labels:
            machineconfiguration.openshift.io/role: master
        spec:
          config:
            ignition:
              version: 3.2.0
            storage:
              disks:
                - device: /dev/sda
                  wipeTable: false
                  partitions:
                    - sizeMiB: 102500
                      startMiB: 344844
                      label: var-imageregistry
              filesystems:
                - path: /var/imageregistry
                  device: /dev/disk/by-partlabel/var/imageregistry
                  format: xfs
            systemd:
              units:
                - name: var-imageregistry.mount
                  enabled: true
                  contents: |
                    [Unit]
                    Before=local-fs.target
                    [Mount]
                    Where=/var/imageregistry
                    What=/dev/disk/by-partlabel/var/imageregistry
                    [Install]
                    WantedBy=local-fs.target
kind: ConfigMap
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "1"
    name: cluster1
    namespace: cluster1
---
apiVersion: cluster.open-cluster-management.io/v1
kind: ManagedCluster
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "2"
    name: cluster1
spec:
    hubAcceptsClient: true
---
apiVersion: agent.open-cluster-management.io/v1
kind: KlusterletAddonConfig
metadata:
    annotations:
        argocd.argoproj.io/sync-wave: "2"
    name: cluster1
    namespace: cluster1
spec:
    applicationManager:
        enabled: false
    certPolicyController:
        enabled: false
    clusterLabels:
        cloud: auto-detect
        vendor: auto-detect
    clusterName: cluster1
    clusterNamespace: cluster1
    iamPolicyController:
        enabled: false
    policyController:
        enabled: true
    searchCollector:
        enabled: false
